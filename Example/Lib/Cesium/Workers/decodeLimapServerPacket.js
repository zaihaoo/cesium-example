/**
 * @license
 * Cesium - https://github.com/CesiumGS/cesium
 * Version 1.114
 *
 * Copyright 2011-2022 Cesium Contributors
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * Columbus View (Pat. Pend.)
 *
 * Portions licensed separately.
 * See https://github.com/CesiumGS/cesium/blob/main/LICENSE.md for full licensing details.
 */

import{a as b}from"./chunk-Y27LWH3W.js";import{a as E}from"./chunk-ON3Y6OZW.js";import{c as F,d as k}from"./chunk-A5XXOFX2.js";var A=F((Ut,D)=>{"use strict";D.exports=v;function v(t,i){this.x=t,this.y=i}v.prototype={clone:function(){return new v(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,i){return this.clone()._rotateAround(t,i)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var i=t.x-this.x,e=t.y-this.y;return i*i+e*e},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,i){return Math.atan2(this.x*i-this.y*t,this.x*t+this.y*i)},_matMult:function(t){var i=t[0]*this.x+t[1]*this.y,e=t[2]*this.x+t[3]*this.y;return this.x=i,this.y=e,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var i=Math.cos(t),e=Math.sin(t),n=i*this.x-e*this.y,r=e*this.x+i*this.y;return this.x=n,this.y=r,this},_rotateAround:function(t,i){var e=Math.cos(t),n=Math.sin(t),r=i.x+e*(this.x-i.x)-n*(this.y-i.y),s=i.y+n*(this.x-i.x)+e*(this.y-i.y);return this.x=r,this.y=s,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}};v.convert=function(t){return t instanceof v?t:Array.isArray(t)?new v(t[0],t[1]):t}});var I=F((Gt,C)=>{"use strict";var tt=A();C.exports=g;function g(t,i,e,n,r){this.properties={},this.extent=e,this.type=0,this._pbf=t,this._geometry=-1,this._keys=n,this._values=r,t.readFields(it,this,i)}function it(t,i,e){t==1?i.id=e.readVarint():t==2?et(e,i):t==3?i.type=e.readVarint():t==4&&(i._geometry=e.pos)}function et(t,i){for(var e=t.readVarint()+t.pos;t.pos<e;){var n=i._keys[t.readVarint()],r=i._values[t.readVarint()];i.properties[n]=r}}g.types=["Unknown","Point","LineString","Polygon"];g.prototype.loadGeometry=function(){var t=this._pbf;t.pos=this._geometry;for(var i=t.readVarint()+t.pos,e=1,n=0,r=0,s=0,o=[],h;t.pos<i;){if(n<=0){var a=t.readVarint();e=a&7,n=a>>3}if(n--,e===1||e===2)r+=t.readSVarint(),s+=t.readSVarint(),e===1&&(h&&o.push(h),h=[]),h.push(new tt(r,s));else if(e===7)h&&h.push(h[0].clone());else throw new Error("unknown command "+e)}return h&&o.push(h),o};g.prototype.bbox=function(){var t=this._pbf;t.pos=this._geometry;for(var i=t.readVarint()+t.pos,e=1,n=0,r=0,s=0,o=1/0,h=-1/0,a=1/0,x=-1/0;t.pos<i;){if(n<=0){var f=t.readVarint();e=f&7,n=f>>3}if(n--,e===1||e===2)r+=t.readSVarint(),s+=t.readSVarint(),r<o&&(o=r),r>h&&(h=r),s<a&&(a=s),s>x&&(x=s);else if(e!==7)throw new Error("unknown command "+e)}return[o,a,h,x]};g.prototype.toGeoJSON=function(t,i,e){var n=this.extent*Math.pow(2,e),r=this.extent*t,s=this.extent*i,o=this.loadGeometry(),h=g.types[this.type],a,x;function f(c){for(var p=0;p<c.length;p++){var _=c[p],j=180-(_.y+s)*360/n;c[p]=[(_.x+r)*360/n-180,360/Math.PI*Math.atan(Math.exp(j*Math.PI/180))-90]}}switch(this.type){case 1:var d=[];for(a=0;a<o.length;a++)d[a]=o[a][0];o=d,f(o);break;case 2:for(a=0;a<o.length;a++)f(o[a]);break;case 3:for(o=nt(o),a=0;a<o.length;a++)for(x=0;x<o[a].length;x++)f(o[a][x]);break}o.length===1?o=o[0]:h="Multi"+h;var l={type:"Feature",geometry:{type:h,coordinates:o},properties:this.properties};return"id"in this&&(l.id=this.id),l};function nt(t){var i=t.length;if(i<=1)return[t];for(var e=[],n,r,s=0;s<i;s++){var o=rt(t[s]);o!==0&&(r===void 0&&(r=o<0),r===o<0?(n&&e.push(n),n=[t[s]]):n.push(t[s]))}return n&&e.push(n),e}function rt(t){for(var i=0,e=0,n=t.length,r=n-1,s,o;e<n;r=e++)s=t[e],o=t[r],i+=(o.x-s.x)*(s.y+o.y);return i}});var U=F((Ot,N)=>{"use strict";var st=I();N.exports=R;function R(t,i){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(ot,this,i),this.length=this._features.length}function ot(t,i,e){t===15?i.version=e.readVarint():t===1?i.name=e.readString():t===5?i.extent=e.readVarint():t===2?i._features.push(e.pos):t===3?i._keys.push(e.readString()):t===4&&i._values.push(ht(e))}function ht(t){for(var i=null,e=t.readVarint()+t.pos;t.pos<e;){var n=t.readVarint()>>3;i=n===1?t.readString():n===2?t.readFloat():n===3?t.readDouble():n===4?t.readVarint64():n===5?t.readVarint():n===6?t.readSVarint():n===7?t.readBoolean():null}return i}R.prototype.feature=function(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];var i=this._pbf.readVarint()+this._pbf.pos;return new st(this._pbf,i,this.extent,this._keys,this._values)}});var O=F((zt,G)=>{"use strict";var at=U();G.exports=ut;function ut(t,i){this.layers=t.readFields(ft,{},i)}function ft(t,i,e){if(t===3){var n=new at(e,e.readVarint()+e.pos);n.length&&(i[n.name]=n)}}});var z=F(B=>{/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */B.read=function(t,i,e,n,r){var s,o,h=r*8-n-1,a=(1<<h)-1,x=a>>1,f=-7,d=e?r-1:0,l=e?-1:1,c=t[i+d];for(d+=l,s=c&(1<<-f)-1,c>>=-f,f+=h;f>0;s=s*256+t[i+d],d+=l,f-=8);for(o=s&(1<<-f)-1,s>>=-f,f+=n;f>0;o=o*256+t[i+d],d+=l,f-=8);if(s===0)s=1-x;else{if(s===a)return o?NaN:(c?-1:1)*(1/0);o=o+Math.pow(2,n),s=s-x}return(c?-1:1)*o*Math.pow(2,s-n)};B.write=function(t,i,e,n,r,s){var o,h,a,x=s*8-r-1,f=(1<<x)-1,d=f>>1,l=r===23?Math.pow(2,-24)-Math.pow(2,-77):0,c=n?0:s-1,p=n?1:-1,_=i<0||i===0&&1/i<0?1:0;for(i=Math.abs(i),isNaN(i)||i===1/0?(h=isNaN(i)?1:0,o=f):(o=Math.floor(Math.log(i)/Math.LN2),i*(a=Math.pow(2,-o))<1&&(o--,a*=2),o+d>=1?i+=l/a:i+=l*Math.pow(2,1-d),i*a>=2&&(o++,a/=2),o+d>=f?(h=0,o=f):o+d>=1?(h=(i*a-1)*Math.pow(2,r),o=o+d):(h=i*Math.pow(2,d-1)*Math.pow(2,r),o=0));r>=8;t[e+c]=h&255,c+=p,h/=256,r-=8);for(o=o<<r|h,x+=r;x>0;t[e+c]=o&255,c+=p,o/=256,x-=8);t[e+c-p]|=_*128}});var X=F((Lt,J)=>{"use strict";J.exports=u;var T=z();function u(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}u.Varint=0;u.Fixed64=1;u.Bytes=2;u.Fixed32=5;var m=65536*65536,H=1/m,xt=12,q=typeof TextDecoder>"u"?null:new TextDecoder("utf8");u.prototype={destroy:function(){this.buf=null},readFields:function(t,i,e){for(e=e||this.length;this.pos<e;){var n=this.readVarint(),r=n>>3,s=this.pos;this.type=n&7,t(r,i,this),this.pos===s&&this.skip(n)}return i},readMessage:function(t,i){return this.readFields(t,i,this.readVarint()+this.pos)},readFixed32:function(){var t=S(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=W(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=S(this.buf,this.pos)+S(this.buf,this.pos+4)*m;return this.pos+=8,t},readSFixed64:function(){var t=S(this.buf,this.pos)+W(this.buf,this.pos+4)*m;return this.pos+=8,t},readFloat:function(){var t=T.read(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=T.read(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var i=this.buf,e,n;return n=i[this.pos++],e=n&127,n<128||(n=i[this.pos++],e|=(n&127)<<7,n<128)||(n=i[this.pos++],e|=(n&127)<<14,n<128)||(n=i[this.pos++],e|=(n&127)<<21,n<128)?e:(n=i[this.pos],e|=(n&15)<<28,dt(e,t,this))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2===1?(t+1)/-2:t/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var t=this.readVarint()+this.pos,i=this.pos;return this.pos=t,t-i>=xt&&q?kt(this.buf,i,t):St(this.buf,i,t)},readBytes:function(){var t=this.readVarint()+this.pos,i=this.buf.subarray(this.pos,t);return this.pos=t,i},readPackedVarint:function(t,i){if(this.type!==u.Bytes)return t.push(this.readVarint(i));var e=w(this);for(t=t||[];this.pos<e;)t.push(this.readVarint(i));return t},readPackedSVarint:function(t){if(this.type!==u.Bytes)return t.push(this.readSVarint());var i=w(this);for(t=t||[];this.pos<i;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){if(this.type!==u.Bytes)return t.push(this.readBoolean());var i=w(this);for(t=t||[];this.pos<i;)t.push(this.readBoolean());return t},readPackedFloat:function(t){if(this.type!==u.Bytes)return t.push(this.readFloat());var i=w(this);for(t=t||[];this.pos<i;)t.push(this.readFloat());return t},readPackedDouble:function(t){if(this.type!==u.Bytes)return t.push(this.readDouble());var i=w(this);for(t=t||[];this.pos<i;)t.push(this.readDouble());return t},readPackedFixed32:function(t){if(this.type!==u.Bytes)return t.push(this.readFixed32());var i=w(this);for(t=t||[];this.pos<i;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){if(this.type!==u.Bytes)return t.push(this.readSFixed32());var i=w(this);for(t=t||[];this.pos<i;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){if(this.type!==u.Bytes)return t.push(this.readFixed64());var i=w(this);for(t=t||[];this.pos<i;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){if(this.type!==u.Bytes)return t.push(this.readSFixed64());var i=w(this);for(t=t||[];this.pos<i;)t.push(this.readSFixed64());return t},skip:function(t){var i=t&7;if(i===u.Varint)for(;this.buf[this.pos++]>127;);else if(i===u.Bytes)this.pos=this.readVarint()+this.pos;else if(i===u.Fixed32)this.pos+=4;else if(i===u.Fixed64)this.pos+=8;else throw new Error("Unimplemented type: "+i)},writeTag:function(t,i){this.writeVarint(t<<3|i)},realloc:function(t){for(var i=this.length||16;i<this.pos+t;)i*=2;if(i!==this.length){var e=new Uint8Array(i);e.set(this.buf),this.buf=e,this.length=i}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),M(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),M(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),M(this.buf,t&-1,this.pos),M(this.buf,Math.floor(t*H),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),M(this.buf,t&-1,this.pos),M(this.buf,Math.floor(t*H),this.pos+4),this.pos+=8},writeVarint:function(t){if(t=+t||0,t>268435455||t<0){ct(t,this);return}this.realloc(4),this.buf[this.pos++]=t&127|(t>127?128:0),!(t<=127)&&(this.buf[this.pos++]=(t>>>=7)&127|(t>127?128:0),!(t<=127)&&(this.buf[this.pos++]=(t>>>=7)&127|(t>127?128:0),!(t<=127)&&(this.buf[this.pos++]=t>>>7&127)))},writeSVarint:function(t){this.writeVarint(t<0?-t*2-1:t*2)},writeBoolean:function(t){this.writeVarint(!!t)},writeString:function(t){t=String(t),this.realloc(t.length*4),this.pos++;var i=this.pos;this.pos=Bt(this.buf,t,this.pos);var e=this.pos-i;e>=128&&L(i,e,this),this.pos=i-1,this.writeVarint(e),this.pos+=e},writeFloat:function(t){this.realloc(4),T.write(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),T.write(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var i=t.length;this.writeVarint(i),this.realloc(i);for(var e=0;e<i;e++)this.buf[this.pos++]=t[e]},writeRawMessage:function(t,i){this.pos++;var e=this.pos;t(i,this);var n=this.pos-e;n>=128&&L(e,n,this),this.pos=e-1,this.writeVarint(n),this.pos+=n},writeMessage:function(t,i,e){this.writeTag(t,u.Bytes),this.writeRawMessage(i,e)},writePackedVarint:function(t,i){i.length&&this.writeMessage(t,pt,i)},writePackedSVarint:function(t,i){i.length&&this.writeMessage(t,yt,i)},writePackedBoolean:function(t,i){i.length&&this.writeMessage(t,gt,i)},writePackedFloat:function(t,i){i.length&&this.writeMessage(t,Ft,i)},writePackedDouble:function(t,i){i.length&&this.writeMessage(t,vt,i)},writePackedFixed32:function(t,i){i.length&&this.writeMessage(t,Vt,i)},writePackedSFixed32:function(t,i){i.length&&this.writeMessage(t,Mt,i)},writePackedFixed64:function(t,i){i.length&&this.writeMessage(t,_t,i)},writePackedSFixed64:function(t,i){i.length&&this.writeMessage(t,Tt,i)},writeBytesField:function(t,i){this.writeTag(t,u.Bytes),this.writeBytes(i)},writeFixed32Field:function(t,i){this.writeTag(t,u.Fixed32),this.writeFixed32(i)},writeSFixed32Field:function(t,i){this.writeTag(t,u.Fixed32),this.writeSFixed32(i)},writeFixed64Field:function(t,i){this.writeTag(t,u.Fixed64),this.writeFixed64(i)},writeSFixed64Field:function(t,i){this.writeTag(t,u.Fixed64),this.writeSFixed64(i)},writeVarintField:function(t,i){this.writeTag(t,u.Varint),this.writeVarint(i)},writeSVarintField:function(t,i){this.writeTag(t,u.Varint),this.writeSVarint(i)},writeStringField:function(t,i){this.writeTag(t,u.Bytes),this.writeString(i)},writeFloatField:function(t,i){this.writeTag(t,u.Fixed32),this.writeFloat(i)},writeDoubleField:function(t,i){this.writeTag(t,u.Fixed64),this.writeDouble(i)},writeBooleanField:function(t,i){this.writeVarintField(t,!!i)}};function dt(t,i,e){var n=e.buf,r,s;if(s=n[e.pos++],r=(s&112)>>4,s<128||(s=n[e.pos++],r|=(s&127)<<3,s<128)||(s=n[e.pos++],r|=(s&127)<<10,s<128)||(s=n[e.pos++],r|=(s&127)<<17,s<128)||(s=n[e.pos++],r|=(s&127)<<24,s<128)||(s=n[e.pos++],r|=(s&1)<<31,s<128))return V(t,r,i);throw new Error("Expected varint not more than 10 bytes")}function w(t){return t.type===u.Bytes?t.readVarint()+t.pos:t.pos+1}function V(t,i,e){return e?i*4294967296+(t>>>0):(i>>>0)*4294967296+(t>>>0)}function ct(t,i){var e,n;if(t>=0?(e=t%4294967296|0,n=t/4294967296|0):(e=~(-t%4294967296),n=~(-t/4294967296),e^4294967295?e=e+1|0:(e=0,n=n+1|0)),t>=18446744073709552e3||t<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");i.realloc(10),lt(e,n,i),wt(n,i)}function lt(t,i,e){e.buf[e.pos++]=t&127|128,t>>>=7,e.buf[e.pos++]=t&127|128,t>>>=7,e.buf[e.pos++]=t&127|128,t>>>=7,e.buf[e.pos++]=t&127|128,t>>>=7,e.buf[e.pos]=t&127}function wt(t,i){var e=(t&7)<<4;i.buf[i.pos++]|=e|((t>>>=3)?128:0),t&&(i.buf[i.pos++]=t&127|((t>>>=7)?128:0),t&&(i.buf[i.pos++]=t&127|((t>>>=7)?128:0),t&&(i.buf[i.pos++]=t&127|((t>>>=7)?128:0),t&&(i.buf[i.pos++]=t&127|((t>>>=7)?128:0),t&&(i.buf[i.pos++]=t&127)))))}function L(t,i,e){var n=i<=16383?1:i<=2097151?2:i<=268435455?3:Math.floor(Math.log(i)/(Math.LN2*7));e.realloc(n);for(var r=e.pos-1;r>=t;r--)e.buf[r+n]=e.buf[r]}function pt(t,i){for(var e=0;e<t.length;e++)i.writeVarint(t[e])}function yt(t,i){for(var e=0;e<t.length;e++)i.writeSVarint(t[e])}function Ft(t,i){for(var e=0;e<t.length;e++)i.writeFloat(t[e])}function vt(t,i){for(var e=0;e<t.length;e++)i.writeDouble(t[e])}function gt(t,i){for(var e=0;e<t.length;e++)i.writeBoolean(t[e])}function Vt(t,i){for(var e=0;e<t.length;e++)i.writeFixed32(t[e])}function Mt(t,i){for(var e=0;e<t.length;e++)i.writeSFixed32(t[e])}function _t(t,i){for(var e=0;e<t.length;e++)i.writeFixed64(t[e])}function Tt(t,i){for(var e=0;e<t.length;e++)i.writeSFixed64(t[e])}function S(t,i){return(t[i]|t[i+1]<<8|t[i+2]<<16)+t[i+3]*16777216}function M(t,i,e){t[e]=i,t[e+1]=i>>>8,t[e+2]=i>>>16,t[e+3]=i>>>24}function W(t,i){return(t[i]|t[i+1]<<8|t[i+2]<<16)+(t[i+3]<<24)}function St(t,i,e){for(var n="",r=i;r<e;){var s=t[r],o=null,h=s>239?4:s>223?3:s>191?2:1;if(r+h>e)break;var a,x,f;h===1?s<128&&(o=s):h===2?(a=t[r+1],(a&192)===128&&(o=(s&31)<<6|a&63,o<=127&&(o=null))):h===3?(a=t[r+1],x=t[r+2],(a&192)===128&&(x&192)===128&&(o=(s&15)<<12|(a&63)<<6|x&63,(o<=2047||o>=55296&&o<=57343)&&(o=null))):h===4&&(a=t[r+1],x=t[r+2],f=t[r+3],(a&192)===128&&(x&192)===128&&(f&192)===128&&(o=(s&15)<<18|(a&63)<<12|(x&63)<<6|f&63,(o<=65535||o>=1114112)&&(o=null))),o===null?(o=65533,h=1):o>65535&&(o-=65536,n+=String.fromCharCode(o>>>10&1023|55296),o=56320|o&1023),n+=String.fromCharCode(o),r+=h}return n}function kt(t,i,e){return q.decode(t.subarray(i,e))}function Bt(t,i,e){for(var n=0,r,s;n<i.length;n++){if(r=i.charCodeAt(n),r>55295&&r<57344)if(s)if(r<56320){t[e++]=239,t[e++]=191,t[e++]=189,s=r;continue}else r=s-55296<<10|r-56320|65536,s=null;else{r>56319||n+1===i.length?(t[e++]=239,t[e++]=191,t[e++]=189):s=r;continue}else s&&(t[e++]=239,t[e++]=191,t[e++]=189,s=null);r<128?t[e++]=r:(r<2048?t[e++]=r>>6|192:(r<65536?t[e++]=r>>12|224:(t[e++]=r>>18|240,t[e++]=r>>12&63|128),t[e++]=r>>6&63|128),t[e++]=r&63|128)}return e}});var Q=k(O(),1),Z=k(X(),1),$=k(b(),1),P=Uint32Array.BYTES_PER_ELEMENT,y={METADATA:0,TERRAIN:1,VECTORTILE:2};y.fromString=function(t){if(t==="Metadata")return y.METADATA;if(t==="Terrain")return y.TERRAIN;if(t==="VectorTile")return y.VECTORTILE};function mt(t,i){let e=y.fromString(t.type),n=t.buffer,r=Nt(n);n=r.buffer;let s=r.length;switch(e){case y.METADATA:return;case y.TERRAIN:return Dt(n,s,i);case y.VECTORTILE:return At(n,s,i)}}var Pt=5,Et=4;function Dt(t,i,e){let n=new DataView(t),r=function(h){for(let a=0;a<Et;++a){let x=n.getUint32(h,!0);if(h+=P,h+=x,h>i)throw new Error("Malformed terrain packet found.")}return h},s=0,o=[];for(;o.length<Pt;){let h=s;s=r(s);let a=t.slice(h,s);e.push(a),o.push(a)}return o}function At(t,i,e){let n=new Q.default(new Z.default(t));for(let r in n.layers)if(Object.prototype.hasOwnProperty.call(n.layers,r)){let s=n.layers[r];s.features=[];for(let o=0;o<s.length;o++){let h=s.feature(o);h.geometry=Ct(h),h.bbox=h.bbox(),s.features.push(h)}}return e=n,n}function Ct(t){let i=t.loadGeometry();switch(t.type){case 1:let e=[];for(let n=0;n<i.length;n++)e[n]=i[n][0];i=e;break;case 3:i=It(i);break}return i.length===1&&(i=i[0]),i}function It(t){let i=t.length;if(i<=1)return Y(t[0])===0?[]:[t];let e=[],n,r;for(let s=0;s<i;s++){let o=Y(t[s]);o!==0&&(r===void 0&&(r=o<0),r===o<0?(n&&e.push(n),n=[t[s]]):n.push(t[s]))}return n&&e.push(n),e}function Y(t){let i=0;for(let e=0,n=t.length,r=n-1,s,o;e<n;r=e++)s=t[e],o=t[r],i+=(o.x-s.x)*(s.y+o.y);return i}var K=1953029805,Rt=2917034100;function Nt(t){let i=new DataView(t),e=0,n=i.getUint32(e,!0);if(e+=P,n!==K&&n!==Rt)throw new Error("Invalid magic");let r=i.getUint32(e,n===K);e+=P;let s=new Uint8Array(t,e),o=$.default.inflate(s);if(o.length!==r)throw new Error("Size of packet doesn't match header");return o}var qt=E(mt);export{qt as default};
